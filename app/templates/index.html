{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block page_content %}
    <div class="page-header">
        <h1>Hello,
            {% if current_user.is_authenticated %} {{ current_user.name }}
            {% else %} Stranger
            {% endif %} !</h1>
    </div>

    <div class="page-body">

        <div class="post-editor">
            {% if current_user.can(Permission.WRITE_ARTICLES) %}
                {{ wtf.quick_form(form) }}
            {% endif %}
        </div>

        <div class="posts-container">
            <ul class="posts">
                {% for post in posts %}
                    <li class="post">
                        <div class="post-author-thumbnail">
                            <a href="{{ url_for('main.profile', name=post.author.name) }}">
                                <img src="{{ post.author.gravatar(size=40) }}" alt="Author Gravatar"
                                     class="img-rounded profile-thumbnail">
                            </a>
                        </div>
                        <div class="post-date">
                            {{ moment(post.timestamp).fromNow() }}
                        </div>
                        <div class="post-author">
                            <a href="{{ url_for('main.profile', name=post.author.name) }}">
                                {{ post.author.name }}
                            </a>
                        </div>
                        <div class="post-body">
                            {{ post.body }}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}